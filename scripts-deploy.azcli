az group create --name techworkshop-l300-ai-agents --location francecentral

@"
{
  "`$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "userPrincipalId": {
      "value": "$(az ad signed-in-user show --query id -o tsv)"
    }
  }
}
"@ | Out-File -FilePath parameters.json -Encoding utf8


az deployment group create --resource-group techworkshop-l300-ai-agents `
--template-file src/infra/DeployAzureResources.bicep `
--parameters parameters.json


Set-AzCognitiveServicesAccount -ResourceGroupName "techworkshop-l300-ai-agents" -Name "aif-x4h6n5r4qbs62" -DisableLocalAuth $false

# Exercise 1
# Navigate to the /src/ directory
cd src

# Create a virtual environment
python -m venv venv

# Activate the virtual environment
# On Windows
#venv\Scripts\activate.bat
# On Windows (PowerShell)
venv\Scripts\Activate.ps1
# On macOS/Linux
#source venv/bin/activate


############# Exercise 2 #############
uvicorn chat_app:app --host 0.0.0.0 --port 8000
######################################

az acr login --name x4h6n5r4qbs62cosureg.azurecr.io
docker tag chat-app x4h6n5r4qbs62cosureg.azurecr.io/chat-app:latest
docker push x4h6n5r4qbs62cosureg.azurecr.io/chat-app:latest

